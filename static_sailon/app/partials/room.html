<div class="row-fluid" ng-controller="RoomController">
	<div ng-class="editor_width" >
		<div class="row-fluid edt-editor-toolbar">
			<div class="edt-filepath"> <i class="room-status" ng-class="{'doing': current.saving, 'done': !current.saving}" tooltip="{{(current.saving?'room-saved':'room-saving')|translate}}" tooltip-trigger="mouseenter" tooltip-placement="top"></i>
				<span ng-repeat="p in tab.paths track by $index">
					/
					<a class="btn-link" ng-click="changePath(tab, $index);">{{ p }}</a>
				</span>
			</div>
			<div class="edt-editor-btns">
				<button class="btn btn-primary edt-editor-btn" ng-class="current.runable?enabled:disabled" title="{{'RUN' | translate }}" ng-click = "runFn()"> 
					<i ng-class="current.lock.run?'icon-stop':'icon-play'" ></i>
				</button>

				<button class="btn btn-primary edt-editor-btn" title="{{'DEBUG' | translate }}">
					<i class="icon-eye-open"></i>
				</button>
				<button class="btn btn-primary edt-editor-btn" title="{{'CONSOLE' | translate }}" 			ng-click="toggleConsole()">
					<i class="icon-share"></i>
				</button>
				<button class="btn btn-primary edt-editor-btn" ng-click="setFullScreen(true)" title="{{'FULL_SCREEN' | translate }}">
					<i class="icon-fullscreen"></i>
				</button>
				<button class="btn btn-primary edt-editor-btn" ng-hide="chat_show" ng-click="toggleChat()" title="{{'SHOW_CHAT_WINDOW' | translate }}">
					<i class="icon-backward"></i>
				</button>
				<button class="btn btn-primary edt-editor-btn" ng-show="chat_show" ng-click="toggleChat()" title="{{'HIDE_CHAT_WINDOW' | translate }}">
					<i class="icon-forward"></i>
				</button>
			</div>
		</div>
		<textarea ui-codemirror="editorOptions" ng-model="model" ui-refresh="true"></textarea>
		<div class="row-fluid" ng-show="show_console">
			<div class="edt-under-editor">
				<div class="span8 edt-console">
					<div class="edt-console-title well well-top" translate="CONSOLE">
						<span ng-bind="consoleState"></span>
					</div>
					<div class="edt-console-inner" ng-style="bottomscroll()" scroll>
						<span ng-repeat="x in current.consoleOutput">
							<p ng-class="{consolestderr: (x.type == 'stderr'), consolestdin: (x.type == 'stdin'), consolestdout: (x.type == 'stdout') }" >{{x.content}}</p>
						</span>
					</div>	
					<input class="edt-console-input" type="text" ng-model = "consoleInput" ng-enter="consoleInputFn()" focus="true" />
				</div>
				<div >
					<div class="well well-top">
						<div class="btn-group">
							<button class="btn disabled debug-btn edt-btn-block" type="button" title="{{'EDT_STEP' | translate }}">
								<i class="icon-arrow-down"></i>
							</button>
							<button class="btn disabled debug-btn edt-btn-block" type="button" title="{{'EDT_NEXT' | translate }}">
								<i class="icon-arrow-right"></i>
							</button>
							<button class="btn disabled debug-btn edt-btn-block" type="button" title="{{'EDT_CONTINUE' | translate }}">
								<i class="icon-share-alt"></i>
							</button>
							<button class="btn disabled debug-btn edt-btn-block" type="button" title="{{'EDT_FINISH' | translate }}">
								<i class="icon-play"></i>
							</button>
						</div>
					</div>
					<div class="edt-varlist" ng-style="bottomscroll()" scroll>
						<table class="table table-hover" id="varlist-table">
							<tr ng-repeat="var in vars">
								<td class="col1">
								</td>
								<td class="col2">
									<span ng-show="var.showVar" ng-click="rename($index)">{{var.name}}</span>
									<input ng-blur="submitVar($index)" ng-enter="submitVar($index)" class="edt-varlist-input" type="text" ng-model="var.name" ng-hide="var.showVar" focus="var.focus" />
								</td>
								<td class="col3">{{var.value}}</td>
							</tr>
							<tr>
								<td class="col1">
								</td>
								<td class="col2" title="{{'ADD_WATCH' | translate }}" ng-click="addVar()">
									<i class="icon-plus"></i>
								</td>
								<td class="col3"></td>
							</tr>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="span3 chat-window" ng-show="chat_show" ng-controller = "ChatController">
		<div class="edt-chat" ng-style="bottomscroll()" scroll>
			<div class="edt-chat-inner">
				<p ng-repeat="chatmessage in current.chat">
					<span ng-class="{selfchatname: (chatmessage.type == 'self'), syschatname: (chatmessage.type == 'system'), edtchatname: (chatmessage.type == '')}">
						{{chatmessage.name}}&nbsp;&nbsp;{{chatmessage.time}}
					</span><br />
					{{chatmessage.content}}
				</p>
			</div>
		</div>
		<input ng-model="chatInput" class="edt-input-msg" type="text"  ng-enter="sendChatMessage()" />
		<div class="edt-chat-btn">
			<button class="btn" type="button" ng-click="sendChatMessage()">
				<i class="icon-comment"></i>
			</button>
			<button class="btn" ng-class="btn_active" type="button" ng-click="enterVoiceRoom()" popover="{{'NO_VOICE' | translate }}" popover-placement="left" popover-trigger="show_popover"><i class="icon-volume-up"></i></button>
		</div>
	</div>
</div>